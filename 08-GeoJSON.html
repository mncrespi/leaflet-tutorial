<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>08 GeoJSON</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.2.0/dist/leaflet.css"
          integrity="sha512-M2wvCLH6DSRazYeZRIm1JnYyh22purTM+FDB5CsyxtQJYeKq83arPe5wgbNmcFXGqiSH2XR8dT/fJISVA1r/zQ=="
          crossorigin="" />
    <style>
        #mapid {
            width: 800px;
            height: 600px;
            border: solid 1px #000;
            margin: auto auto;
        }
    </style>

    <script src="https://unpkg.com/leaflet@1.2.0/dist/leaflet.js"
            integrity="sha512-lInM/apFSqyy1o6s89K4iQUKg6ppXEgsVxT35HbzUupEVRh2Eu9Wdl4tHj7dZO0s1uvplcYGmt3498TtHq+log=="
            crossorigin=""></script>

    <script>

        /** Importante:
         * A diferencia de Leaflet, GeoJSON utiliza el siguiente formato de coordenadas:
         * [lon, lat] en vez de [lat, lon]
         * RFC: https://tools.ietf.org/html/rfc7946#section-9
         * Doc: http://leafletjs.com/reference-1.2.0.html#geojson
         * Doc: http://leafletjs.com/examples/geojson/
         * */

        var _dataGeoJSON = {
            type: "FeatureCollection",
            features: [
                {
                    type: "Feature",
                    properties: {
                        popupContent: "<h2 style='color: red; margin: 0;'>Puente de la Mujer</h2><br>Ciudad de Buenos Aires."
                    },
                    geometry: {
                        type: "Point",
                        coordinates: [-58.365044, -34.607933]
                    }
                },
                {
                    type: "Feature",
                    properties: {
                        popupContent: "<h2 style='color: green; margin: 0;'>Casa Rosada!</h2><br>Ciudad de Buenos Aires."
                    },
                    geometry: {
                        type: "Point",
                        coordinates: [-58.370052, -34.608123]
                    }
                },
                {
                    type: "Feature",
                    properties: {
                        popupContent: "<h2 style='color: blue; margin: 0;'>Obelisco</h2><br>Ciudad de Buenos Aires."
                    },
                    geometry: {
                        type: "Point",
                        coordinates: [-58.381609, -34.603686]
                    }
                },
                {
                    type: "Feature",
                    geometry: {
                        type: "LineString",
                        coordinates: [
                            [-58.365044, -34.607933],
                            [-58.370052, -34.608123],
                            [-58.381609, -34.603686]
                        ]
                    },
                    properties: {}
                }
            ]
        }

    </script>

</head>
<body>
    <h2>Map:</h2>
    <h3>Setea el Mapa de forma centrada en Casa Rosada. [-34.608123, -58.370052]</h3>

    <div id="mapid"></div>

    <script>
        console.log(_dataGeoJSON)

        // Format: [Lat, Lon]
        var coordinates = [-34.608123, -58.370052]

        // Map Properties
        var mymap = L.map('mapid').setView(coordinates, 15);


        // GeoJSON:

        // Setea los Estilos para el GeoJSON
        var _style = {
            color: "green",
            weight: 5
        };

        // Este metodo se utiliza de forma opcional para convertir los puntos del GeoJSON en instancias de Leaflet.
        var _pointToLayer = function (feature, latlng) {
            return L.marker(latlng, {});
        }

         // Este metodo se utiliza para setear/formatear los parametros y funcionalidade especificas para leaflet.
         // Por ejemplo: Popups, tooltips, areas.
         // Se puede agregar mayor complejidad dependiendo de la estructura de la propertie.
        var _onEachFeature = function (feature, layer) {
            layer.bindPopup(feature.properties.popupContent);
        }

        L.geoJSON(_dataGeoJSON, {
            style: _style,
            pointToLayer: _pointToLayer,
            onEachFeature: _onEachFeature
        }).addTo(mymap);



        // Set Map Instance
        L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
            maxZoom: 18,
            attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, ' +
            '<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
            'Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
            id: 'mapbox.streets'
        }).addTo(mymap);

    </script>
</body>
</html>